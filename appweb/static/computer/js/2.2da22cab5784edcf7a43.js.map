{"version":3,"sources":["webpack:///./src/js/deepclone.js","webpack:///src/components/permission/role.vue","webpack:///./src/components/permission/role.vue?da73","webpack:///./src/components/permission/role.vue"],"names":["deep","data","obj","type","this","getType","i","len","length","push","deepClone","key","undefined","Object","prototype","toString","call","slice","toLowerCase","role","_this","regUrlPage","regUrlAction","isdisabled","isRoot","isEdit","level","hasUrl","role_id","$store","getters","roleInfo","role_name","parent_id","dialogVisible","getRoleListUrl","httpConfig","roleList","permisionList","defaultPermisionList","defaultCheckKey","defaultProps","children","label","defaultProps2","permissionForm","pri_type","name","url","icon","parent_code","target","leaf_flag","remark","permissionFormRule","required","message","validator","rule","value","callback","test","Error","created","getRoleList","getPermisionList","mounted","methods","that","ajax","method","done","error","resdata","$message","msg","formateRoleList","role_list","role_level","$nextTick","$refs","roleTree","setCurrentKey","function","priList","pri_list","parentList","parent_pri_list","defaultList","checkKey","forEach","item","disabled","subItem","pri_code","formatePermissionList","element","getDefaultPermisionList","_this2","privilegeList","newRoleList","temp","roleItem","code","permissionList","parentCode","newpermissionList","permissionItem","handleNodeClick","node","handlePerNodeClick","console","log","addRole","_this3","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","_ref","params","appendRoleNode","catch","newChild","$set","delRole","_this4","$confirm","ajaxData","parent","index","findIndex","d","splice","editRole","_this5","_ref2","delPri","_this6","getCheckedNodes","_this7","checkList","permissionTree","getCheckedKeys","halfCheckList","getHalfCheckedKeys","concat","addPri","editPri","pri_name","indexOf","lastIndex","lastIndexOf","lastPage","openDialog","opt","dialogSave","_this8","validate","valid","apiUrl","clearData","dialogCancel","resetFields","permission_role","render","_vm","_h","$createElement","_c","_self","staticStyle","padding","attrs","id","gutter","span","staticClass","_v","ref","default-expand-all","node-key","highlight-current","props","expand-on-click-node","on","node-click","scopedSlots","_u","fn","_s","click","$event","stopPropagation","size","default-checked-keys","show-checkbox","_e","title","visible","width","center","update:visible","close","model","rules","label-width","label-position","prop","placeholder","$$v","expression","clearable","auto-complete","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/computer/js/2.2da22cab5784edcf7a43.js","sourcesContent":["\r\n // 深克隆\r\n function deepClone (data) {\r\n  var type = this.getType(data);\r\n  var obj;\r\n  if(type === 'array'){\r\n      obj = [];\r\n  } else if(type === 'object'){\r\n      obj = {};\r\n  } else {\r\n  //不再具有下一层次\r\n  return data;\r\n  }\r\n  if(type === 'array'){\r\n  for(var i = 0, len = data.length; i < len; i++){\r\n      obj.push(this.deepClone(data[i]));\r\n  }\r\n  } else if(type === 'object'){\r\n  for(var key in data){\r\n      obj[key] = this.deepClone(data[key]);\r\n  }\r\n  }\r\n  return obj;\r\n}\r\n// 判断对象类型\r\n function getType (obj) {\r\n  if (obj === null) return 'null';\r\n  if (obj === undefined) return 'undefined';\r\n  return Object.prototype.toString.call(obj).slice(8,-1).toLowerCase();\r\n}\r\nvar deep={}\r\ndeep.deepClone=deepClone;\r\ndeep.getType=getType;\r\nexport default deep;\n\n\n// WEBPACK FOOTER //\n// ./src/js/deepclone.js","<template>\r\n\t<div id=\"role\" style=\"padding:20px 40px\">\r\n\t\t<el-row :gutter=\"20\">\r\n\t\t\t<el-col :span=\"8\" >\r\n\t\t\t\t<div class=\"role-tree-container\">\r\n\t\t\t\t\t<div class=\"role-list\">角色列表</div>\r\n\t\t\t\t\t<el-tree \r\n\t\t\t\t\t\tref=\"roleTree\"\r\n\t\t\t\t\t\tdefault-expand-all\r\n\t\t\t\t\t\t:data=\"roleList\" \r\n\t\t\t\t\t\tnode-key=\"code\"\r\n\t\t\t\t\t\thighlight-current\r\n\t\t\t\t\t\t:props=\"defaultProps\" \r\n\t\t\t\t\t\t:expand-on-click-node=\"false\"\r\n\t\t\t\t\t\t@node-click=\"handleNodeClick\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t\t\t\t\t\t<span class=\"action-btn\">\r\n\t\t\t\t\t\t\t\t<button class=\"el-icon-circle-plus btn-add\" \r\n\t\t\t\t\t\t\t\t\t:disabled=\"(node.level+level)===3\"\r\n\t\t\t\t\t\t\t\t  @click.stop=\"addRole(node,data)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button  class=\"el-icon-edit-outline btn-edit\"\r\n\t\t\t\t\t\t\t\t\t:disabled='node.data.parent_id==null'\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"editRole(node,data)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button  class=\"el-icon-circle-close btn-del\"\r\n\t\t\t\t\t\t\t\t\t:disabled='node.data.parent_id==null'\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"delRole(node,data)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</el-tree>\r\n\t\t\t\t</div>\r\n\t\t\t</el-col>\r\n\t\t\t<el-col :span=\"12\" >\r\n\t\t\t\t<div class=\"role-tree-container\">\r\n\t\t\t\t\t<div class=\"role-list\">\r\n\t\t\t\t\t\t<span>权限列表</span>\r\n\t\t\t\t\t\t<el-button type=\"primary\" size=\"middle\" @click=\"getCheckedNodes\" :disabled=\"parent_id==null?true:false\">保存授权</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<el-tree \r\n\t\t\t\t\t\tref=\"permissionTree\"\r\n\t\t\t\t\t\t:data=\"permisionList\" \r\n\t\t\t\t\t\t:props=\"defaultProps2\" \r\n\t\t\t\t\t\t:default-checked-keys=\"defaultCheckKey\"\r\n\t\t\t\t\t\tnode-key=\"pri_code\"\r\n\t\t\t\t\t\tshow-checkbox\r\n\t\t\t\t\t\tdefault-expand-all\r\n\t\t\t\t\t\t:expand-on-click-node=\"false\"\r\n\t\t\t\t\t\t@node-click=\"handlePerNodeClick\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n\t\t\t\t\t\t\t<span>{{ node.label }}</span>\r\n\t\t\t\t\t\t\t<span class=\"action-btn\" v-if='role_name===\"超级管理员\"'>\r\n\t\t\t\t\t\t\t\t<button class=\"el-icon-circle-plus btn-add\" \r\n\t\t\t\t\t\t\t\t\t @click.stop=\"addPri(node,data)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button  class=\"el-icon-edit-outline btn-edit\"\r\n\t\t\t\t\t\t\t\t @click.stop=\"editPri(node,data)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button  class=\"el-icon-circle-close btn-del\"\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"delPri(node,data)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</el-tree>\r\n\t\t\t\t</div>\r\n\t\t\t</el-col>\r\n\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t<el-button type=\"success\" size=\"middle\"  v-if='role_name===\"超级管理员\"' @click=\"openDialog(1)\">新增权限</el-button>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t <!-- 添加权限弹框 -->\r\n\t\t<el-dialog\r\n\t\ttitle=\"权限信息\"\r\n\t\t:visible.sync=\"dialogVisible\"\r\n\t\twidth=\"50%\"\r\n\t\tcenter\r\n\t\t@close=\"dialogCancel\"\r\n\t\t> \t\r\n\t\t\t<el-form ref=\"permissionForm\"  :model=\"permissionForm\" :rules=\"permissionFormRule\"  label-width=\"120px\" label-position=\"left\">\r\n\t\t\t\t\t<el-form-item label=\"权限类型:\" prop=\"pri_type\">\r\n\t\t\t\t\t\t<el-select v-model=\"permissionForm.pri_type\" placeholder=\"请选择\"  style=\"width:100%;\" :disabled=\"isdisabled||isEdit\">\r\n\t\t\t\t\t\t\t<el-option label=\"菜单\" :value=\"1\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"权限\" :value=\"2\"></el-option>\r\n\t\t\t  \t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"权限名称:\" prop=\"name\" >\r\n\t\t\t\t\t\t<el-input\r\n              placeholder=\"请输入权限名称\"\r\n              v-model=\"permissionForm.name\"\r\n              clearable>\r\n            </el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"图标名称:\" v-if=\"isRoot&&permissionForm.pri_type===1\">\r\n\t\t\t\t\t\t<el-input\r\n              placeholder=\"请输入图标名称\"\r\n              v-model=\"permissionForm.icon\"\r\n              clearable>\r\n            </el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"是否弹窗:\" v-if=\"permissionForm.pri_type===1\">\r\n\t\t\t\t\t\t<el-select v-model=\"permissionForm.target\" placeholder=\"请选择是否弹窗显示\"  style=\"width:100%;\">\r\n\t\t\t\t\t\t\t<el-option label=\"是\" value=\"_blank\"></el-option>\r\n\t\t\t\t\t\t\t<el-option label=\"否\" :value=\"null\"></el-option>\r\n\t\t\t  \t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"路由:\"  v-if=\"isRoot\">\r\n\t\t\t\t\t\t<el-input\r\n              placeholder=\"请输入路由\"\r\n              v-model=\"permissionForm.url\"\r\n              clearable>\r\n            </el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"路由:\"  prop=\"url\" v-else>\r\n\t\t\t\t\t\t<el-input v-model=\"permissionForm.url\" auto-complete=\"off\">\r\n\t\t\t\t\t\t\t<template slot=\"prepend\" v-if=\"hasUrl\">{{hasUrl}}</template>\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"描述:\">\r\n\t\t\t\t\t\t<el-input\r\n              placeholder=\"请输入描述\"\r\n              v-model=\"permissionForm.remark\"\r\n              clearable>\r\n            </el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogCancel\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"dialogSave\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport deep from '@/js/deepclone';\r\nimport {Ajax} from '@/js/ajax'\r\nexport default {\r\n\tdata () {\r\n\t\tlet regUrlPage = /^\\/[a-zA-Z]*$/;\r\n\t\tlet regUrlAction = /^:[a-zA-Z]*$/;\r\n\t\tlet validateUrl = (rule, value, callback) => {\r\n\t\t\t\tif (value && !regUrlPage.test(value) && !regUrlAction.test(value)) {\r\n          callback(new Error('路由只能是由/或:开头的字母串'));\r\n        } else {\r\n        \tif (this.permissionForm.pri_type) {\r\n        \t\tif (this.permissionForm.pri_type == 1) {\r\n        \t\t\tif (value && !regUrlPage.test(value)) {\r\n        \t\t\t\tcallback(new Error('权限类型为菜单，路由只能以/开头'));\r\n        \t\t\t}\r\n        \t\t}\r\n        \t} else {\r\n        \t\tcallback(new Error('请先选择权限类型'));\r\n        \t}\r\n          callback();\r\n        }\r\n      }\r\n\t\treturn {\r\n\t\t\t//角色层级 角色最多3层 0超级管理员 1一代级 2二代级\r\n\t\t\tisdisabled:false,\r\n\t\t\tisRoot:false,\r\n\t\t\tisEdit:false,\r\n\t\t\tlevel:0,\r\n\t\t\thasUrl:null,\r\n\t\t\trole_id:this.$store.getters.roleInfo.role_id,\r\n\t\t\trole_name:this.$store.getters.roleInfo.role_name,\r\n\t\t\tparent_id:null,\r\n\t\t\tdialogVisible:false,\r\n\t\t\tgetRoleListUrl: httpConfig + 'role/list',\r\n\t\t\troleList:[],//角色列表\r\n\t\t\tpermisionList:[],//权限列表\r\n\t\t\tdefaultPermisionList:[],\r\n\t\t\tdefaultCheckKey:[],\t\t\t //默认选中\r\n\t\t\troleInfo:this.$store.getters.roleInfo,\r\n\t\t\tdefaultProps: {\r\n\t\t\t\tchildren: 'children',\r\n\t\t\t\tlabel: 'name'\r\n\t\t\t},\r\n\t\t\tdefaultProps2:{\r\n\t\t\t\tchildren: 'children',\r\n\t\t\t\tlabel: 'pri_name'\r\n\t\t\t},\r\n\t\t\tpermissionForm:{\r\n\t\t\t\tpri_type:null,\r\n\t\t\t\tname:null,\r\n\t\t\t\turl:\"\",\r\n\t\t\t\ticon:null,\r\n\t\t\t\tparent_code:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t\tleaf_flag:1,\r\n\t\t\t\tremark:null,\r\n\t\t\t},\r\n\t\t\tpermissionFormRule:{\r\n\t\t\t\t\tpri_type: [\r\n            { required: true, message: '请选择权限类型' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tname:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入权限名称' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\ticon:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入图标名称' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\turl:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入路由' },\r\n\t\t\t\t\t\t{  validator: validateUrl,  }\r\n\t\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated () {\r\n\t\tthis.getRoleList();\r\n\t\tthis.getPermisionList();\r\n\t\r\n\r\n\r\n\t},\r\n\tmounted () {\r\n\t\t\t// console.log(\tthis.$refs.roleTree)\r\n\t\t\r\n\t},\r\n\tmethods: {\r\n\t\t\t// 获取角色列表数据\r\n\t\t\tgetRoleList () {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tAjax({\r\n          method:'post',\r\n\t\t\t\t\turl : httpConfig+'getallrole',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdone: function(error,data,resdata) {\r\n\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.roleList = that.formateRoleList(data.role_list,null);\r\n\t\t\t\t\t\t\tthat.level=data.role_level;\r\n\t\t\t\t\t\t\tlet role_id=that.roleInfo.role_id;\r\n\t\t\t\t\t\t\tthat.$nextTick(function(){\r\n\t\t\t\t\t\t\t\tthat.$refs.roleTree.setCurrentKey(role_id);  \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t}\t\r\n        })\r\n\t\t\t},\r\n\t\t\t//获取权限列表数据\r\n\t\t\tgetPermisionList(parent_id){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tAjax({\r\n          method:'post',\r\n\t\t\t\t\turl : httpConfig+'getrolepri',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\trole_id:that.role_id,\r\n\t\t\t\t\t\tparent_id:that.parent_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdone: function(error,data,resdata) {\r\n\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlet priList=data.pri_list;\r\n\t\t\t\t\t\t\tlet parentList=data.parent_pri_list;\r\n\t\t\t\t\t\t\tlet defaultList=that.defaultPermisionList;\r\n\t\t\t\t\t\t\tlet checkKey=[];\r\n\t\t\t\t\t\t\tif(that.parent_id){\r\n\t\t\t\t\t\t\tdefaultList.forEach(item=>{\r\n\t\t\t\t\t\t\t\t \tlet disabled=true;\r\n\t\t\t\t\t\t\t\t\tparentList.forEach(subItem=>{\r\n\t\t\t\t\t\t\t\t\t\tif(item.pri_code===subItem.pri_code){\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled=false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tpriList.forEach(subItem=>{\r\n\t\t\t\t\t\t\t\t\t\tif(item.pri_code===subItem.pri_code){\r\n\t\t\t\t\t\t\t\t\t\t\t\tcheckKey.push(item.pri_code);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\titem.disabled=disabled;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.permisionList=that.formatePermissionList(defaultList,null);\r\n\t\t\t\t\t\t\t\tthat.defaultCheckKey=checkKey;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthat.defaultPermisionList=that.deepClone(priList);\r\n\t\t\t\t\t\t\t\tpriList.forEach(element=>{\r\n\t\t\t\t\t\t\t\t\t\telement.disabled=true;\r\n\t\t\t\t\t\t\t\t\t\tcheckKey.push(element.pri_code);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.permisionList=that.formatePermissionList(priList,null);\r\n\t\t\t\t\t\t\t\tthat.defaultCheckKey=checkKey;\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// that.permisionList = data.pri_list;\r\n\t\t\t\t\t\t\t// console.log(that.permisionList,\"list\")\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t}\t\r\n        })\r\n\t\t\t},\r\n\t\t\tgetDefaultPermisionList(){\r\n\t\t\t\tlet defaultList=this.$store.getters.privilegeList;\r\n\t\t\t\tdefaultList.forEach(element => {\r\n\t\t\t\t\t\telement.disabled=true;\r\n\t\t\t\t\t\tthis.defaultCheckKey.push(element.pri_code);\r\n\r\n\t\t\t\t});\r\n\t\t\t\tthis.permisionList=this.formatePermissionList(defaultList,null);\r\n\t\t\t\tthis.defaultPermisionList=this.formatePermissionList(defaultList,null);\r\n\t\t\t\t// console.log(this.permisionList,\"default\")\r\n\t\t\t},\r\n\t\t\r\n\t\t// 将角色列表数据渲染成要的数据格式\r\n\t\t\tformateRoleList (roleList, parent_id) {\r\n\t\t\t\tlet newRoleList = [];\r\n        let temp;\r\n        for (let i = 0; i < roleList.length; i++) {\r\n          if (roleList[i].parent_id == parent_id) {\r\n            let roleItem = roleList[i];\r\n            temp =this.formateRoleList(roleList, roleList[i].code);\r\n            if (temp.length > 0) {\r\n            \troleItem.children = temp;\r\n            }\r\n            newRoleList.push(roleItem);\r\n          }\r\n        }\r\n        return newRoleList;\r\n\t\t\t},\r\n\t\t\t\t// 将权限列表数据渲染成要的数据格式\r\n\t\t\tformatePermissionList (permissionList, parentCode) {\r\n\t\t\t\tlet newpermissionList = [];\r\n        let temp;\r\n        for (let i = 0; i < permissionList.length; i++) {\r\n          if (permissionList[i].parent_code == parentCode) {\r\n            let permissionItem = permissionList[i];\r\n            \r\n            temp =this.formatePermissionList(permissionList, permissionList[i].pri_code);\r\n            if (temp.length > 0) {\r\n            \tpermissionItem.children = temp;\r\n            }\r\n            newpermissionList.push(permissionItem);\r\n          }\r\n        }\r\n        return newpermissionList;\r\n\t\t\t},\r\n\t\t\t // 深克隆\r\n      deepClone (data) {\r\n        var type = this.getType(data);\r\n        var obj;\r\n        if(type === 'array'){\r\n            obj = [];\r\n        } else if(type === 'object'){\r\n            obj = {};\r\n        } else {\r\n        //不再具有下一层次\r\n        return data;\r\n        }\r\n        if(type === 'array'){\r\n        for(var i = 0, len = data.length; i < len; i++){\r\n            obj.push(this.deepClone(data[i]));\r\n        }\r\n        } else if(type === 'object'){\r\n        for(var key in data){\r\n            obj[key] = this.deepClone(data[key]);\r\n        }\r\n        }\r\n        return obj;\r\n      },\r\n      // 判断对象类型\r\n      getType (obj) {\r\n        if (obj === null) return 'null';\r\n        if (obj === undefined) return 'undefined';\r\n        return Object.prototype.toString.call(obj).slice(8,-1).toLowerCase();\r\n      },\r\n\t\t\t//树节点点击事件\r\n\t\t\thandleNodeClick(data,node){\r\n\t\t\t\tthis.role_id=data.code;\r\n\t\t\t\tthis.parent_id=data.parent_id;\r\n\t\t\t\tthis.role_name=data.name;\r\n\r\n\t\t\t\tthis.getPermisionList()\r\n\t\t\t},\r\n\t\t\thandlePerNodeClick(data,node){\r\n\r\n \t\t\t\tconsole.log(data,node);\r\n\t\t\t},\r\n\t\t\taddRole(node,data){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthis.$prompt('请输入角色名', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\tinputPattern: /^.{1,20}$/,\r\n\t\t\t\t\tinputErrorMessage: '角色名格式不正确'\r\n        }).then(({ value }) => {\r\n\t\t\t\t\tlet params={};\r\n\t\t\t\t\tparams.name=value;\r\n\t\t\t\t\tparams.parent_id=data.code;\r\n\t\t\t\t\tAjax({\r\n\t\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\t\turl : httpConfig+'addrole',\r\n\t\t\t\t\t\tdata: params,\r\n\t\t\t\t\t\tdone: function(error,data,resdata) {\r\n\t\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '新建角色名是: ' + value\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tlet code=data.code;\r\n\t\t\t\t\t\t\t\tthat.appendRoleNode(node,code,value);\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\t that.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\tmessage: error.msg\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t})\r\n         \r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });       \r\n        });\r\n\t\t\t},\r\n\t\t\tappendRoleNode(node,code,value){\r\n\t\t\t\t// console.log(node,code,value)\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconst newChild = { parent_id:node.data.code,code: code, name: value, children: [] };\r\n\t\t\t\tif (!node.data.children) {\r\n\t\t\t\t\tthis.$set(node.data, 'children', []);\r\n\t\t\t\t}\r\n\t\t\t\tnode.data.children.push(newChild);\r\n\t\t\t},\r\n\t\t\tdelRole(node,data){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$confirm('确认删除该角色?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          Ajax({\r\n\t          method:'post',\r\n\t\t\t\t\t\turl: httpConfig+'delrole',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\trole_id: data.code\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdone: function(error,ajaxData,resdata) {\r\n\t\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconst parent = node.parent;\r\n\t\t\t\t        const children = parent.data.children || parent.data;\r\n\t\t\t\t\t\t\t\tconst index = children.findIndex(d => d.code === data.code);\r\n\t\t\t\t\t\t\t\t// console.log(children);\r\n\t\t\t\t        children.splice(index, 1);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t}\t\r\n\t        })\r\n        }).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          });     \r\n        });\r\n\t\t\t},\r\n\t\t\teditRole(node,data){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthis.$prompt('请输入修改角色名', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\tinputPattern: /^.{1,20}$/,\r\n\t\t\t\t\tinputErrorMessage: '角色名格式不正确'\r\n        }).then(({ value }) => {\r\n\t\t\t\t\tlet params={};\r\n\t\t\t\t\tparams.name=value;\r\n\t\t\t\t\tparams.role_id=data.code;\r\n\t\t\t\t\tAjax({\r\n\t\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\t\turl : httpConfig+'editrole',\r\n\t\t\t\t\t\tdata: params,\r\n\t\t\t\t\t\tdone: function(error,data,resdata) {\r\n\t\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '修改角色名为: ' + value\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// let code=data.code;\r\n\t\t\t\t\t\t\t\t// that.appendRoleNode(node,code,value);\r\n\t\t\t\t\t\t\t\tnode.data.name=value;\r\n\t\t\t\t\t\t\t\t// console.log(node)\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\t that.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\tmessage: error.msg\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t})\r\n         \r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });       \r\n        });\r\n\t\t\t},\r\n\t\t\t//删除权限\r\n\t\t\tdelPri(node,data){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthis.$confirm('确认删除该权限?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          Ajax({\r\n\t          method:'post',\r\n\t\t\t\t\t\turl: httpConfig+'delpri',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tpri_code: data.pri_code,\r\n\t\t\t\t\t\t\trole_id:this.roleInfo.role_id,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdone: function(error,ajaxData,resdata) {\r\n\t\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconst parent = node.parent;\r\n\t\t\t\t        const children = parent.data.children || parent.data;\r\n\t\t\t\t\t\t\t\tconst index = children.findIndex(d => d.pri_code === data.pri_code);\r\n\t\t\t\t        children.splice(index, 1);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}, function(error) {\r\n\t\t\t\t\t\t\tthat.$message.error(error.msg);\r\n\t\t\t\t\t\t}\t\r\n\t        })\r\n        }).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          });     \r\n        });\r\n\t\t\t},\r\n\t\t\r\n\t\t\tgetCheckedNodes(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet checkList=this.$refs.permissionTree.getCheckedKeys();\r\n\t\t\t\tlet halfCheckList=this.$refs.permissionTree.getHalfCheckedKeys();\r\n\t\t\t\tlet pri_codes=checkList.concat(halfCheckList);\r\n\r\n\t\t\t\tthis.$confirm('是否保存权限授权？', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '保存成功!'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消'\r\n          });          \r\n        });\r\n\t\t\t\t// console.log(this.$refs.permissionTree.getCheckedKeys());\r\n\t\t\t\t// console.log(this.$refs.permissionTree.getHalfCheckedKeys())\r\n\t\t\t},\r\n\t\t\taddPri(node,data){\r\n\t\t\t\r\n\t\t\t\tif(data.url){\r\n\t\t\t\t\tthis.hasUrl=data.url\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.hasUrl=null\r\n\t\t\t\t}\r\n\t\t\t\tif((data.pri_type===1&&data.leaf_flag===1)||data.pri_type===2){\r\n\t\t\t\t\t\tthis.isdisabled=true;\r\n\t\t\t\t\t\tthis.permissionForm.pri_type=2;\r\n\t\t\t\t\t\t// this.permissionForm.leaf_flag=1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.isdisabled=false;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.isRoot=false\r\n\t\t\t\t\tthis.permissionForm.parent_code=data.pri_code;\r\n\t\t\t\t\tthis.dialogVisible=true;\r\n\t\t\t},\r\n\t\t\teditPri(node,data){\r\n\t\t\t\tconsole.log(data)\r\n\t\t\r\n\t\t\t\tthis.permissionForm.pri_type=data.pri_type;\r\n\t\t\t\tthis.permissionForm.name=data.pri_name;\r\n\t\t\t\tthis.permissionForm.icon=data.icon;\r\n\t\t\t\tthis.permissionForm.parent_code=data.parent_code;\r\n\t\t\t\tthis.permissionForm.target=data.target;\r\n\t\t\t\tthis.permissionForm.leaf_flag=data.leaf_flag;\r\n\t\t\t\tthis.permissionForm.remark=data.remark;\r\n\t\t\t\tif (data.url.indexOf(\":\") !== -1) {\r\n\t\t\t\t\tlet lastIndex = data.url.lastIndexOf(':');\r\n\t\t\t\t\tthis.hasUrl = data.url.slice(0,lastIndex);\r\n\t\t\t\t\tthis.permissionForm.url = data.url.slice(lastIndex);\r\n\t\t\t\t} else if (data.url.indexOf(\"/\") !== -1) {\r\n\t\t\t\t\r\n\t\t\t\t\tlet lastPage = data.url.lastIndexOf('/');\r\n\t\t\t\t\tthis.hasUrl = data.url.slice(0,lastPage);\r\n\t\t\t\t\tthis.permissionForm.url = data.url.slice(lastPage);\r\n\t\t\t\t}\r\n\t\t\t\tthis.isEdit=true;\r\n\t\t\t\tthis.dialogVisible=true;\r\n\t\t\t\t\r\n\t\t\t\t// this.addPri(node,data)\r\n\t\t\t},\r\n\t\t\t//打开添加编辑弹窗\r\n\t\t\topenDialog(opt){\r\n\t\t\t\tif(opt===1){\r\n\t\t\t\t\tthis.isdisabled=true;\r\n\t\t\t\t\tthis.isRoot=true;\r\n\t\t\t\t\tthis.permissionForm.pri_type=1;\r\n\t\t\t\t\tthis.permissionForm.leaf_flag=0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dialogVisible=true;\r\n\t\t\t},\r\n\t\t\tdialogSave(){\r\n\t\t\t\tlet that=this\r\n\t\t\t\tlet params=this.permissionForm;\r\n\t\t\t\r\n\t\t\t\tthis.$refs['permissionForm'].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tparams.role_id=this.roleInfo.role_id;\r\n\t\t\t\t\t\tlet apiUrl=\"\";\r\n\t\t\t\t\t\tlet msg=\"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(that.hasUrl){\r\n\t\t\t\t\t\t\tparams.url=that.hasUrl+params.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(that.isEdit){\r\n\t\t\t\t\t\t\tapiUrl='editpri',\r\n\t\t\t\t\t\t\tmsg=\"编辑成功\"\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tapiUrl='addpri',\r\n\t\t\t\t\t\t\tmsg=\"添加成功\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tAjax({\r\n\t\t\t\t\t\t\t\tmethod:'post',\r\n\t\t\t\t\t\t\t\turl : httpConfig+apiUrl,\r\n\t\t\t\t\t\t\t\tdata : params,\r\n\t\t\t\t\t\t\t\tdone : function(error,data,resdata) {\r\n\t\t\t\t\t\t\t\t\tif(error){\r\n\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: error.msg\r\n\t\t\t\t\t\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: msg\r\n\t\t\t\t\t\t\t\t\t\t});\t \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tthat.dialogVisible=false;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.getPermisionList();\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t},catch(error) {\r\n\t\t\t\t\t\t\t\t\t\tthat.$message({\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: error.msg\r\n\t\t\t\t\t\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t});    \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n      \t});\r\n\t\r\n\t\t\t},\r\n\t\t\tclearData(){\r\n\t\t\t\tthis.permissionForm.pri_type=null;\r\n\t\t\t\tthis.permissionForm.name=null;\r\n\t\t\t\tthis.permissionForm.url=\"\";\r\n\t\t\t\tthis.permissionForm.icon=null;\r\n\t\t\t\tthis.permissionForm.parent_code=null;\r\n\t\t\t\tthis.permissionForm.target=null;\r\n\t\t\t\tthis.permissionForm.leaf_flag=1;\r\n\t\t\t\tthis.permissionForm.remark=null;\r\n\t\t\t\tthis.hasUrl=null;\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tthis.isRoot=false;\r\n\t\t\t\tthis.isEdit=false\r\n\t\t\t},\r\n\t\t\tdialogCancel(){\r\n\t\t\t\r\n\t\t\t\tthis.clearData();\r\n\t\t\t\tthis.$refs[\"permissionForm\"].resetFields();\r\n      },\r\n\t\t\t\r\n\t}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped src=\"@/styles/permission/role.scss\"></style>\r\n\r\n<style >\r\n\t.el-tree-node__content{\r\n\theight:35px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/permission/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px 40px\"},attrs:{\"id\":\"role\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"role-tree-container\"},[_c('div',{staticClass:\"role-list\"},[_vm._v(\"角色列表\")]),_vm._v(\" \"),_c('el-tree',{ref:\"roleTree\",attrs:{\"default-expand-all\":\"\",\"data\":_vm.roleList,\"node-key\":\"code\",\"highlight-current\":\"\",\"props\":_vm.defaultProps,\"expand-on-click-node\":false},on:{\"node-click\":_vm.handleNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_vm._v(\" \"),_c('span',{staticClass:\"action-btn\"},[_c('button',{staticClass:\"el-icon-circle-plus btn-add\",attrs:{\"disabled\":(node.level+_vm.level)===3},on:{\"click\":function($event){$event.stopPropagation();_vm.addRole(node,data)}}}),_vm._v(\" \"),_c('button',{staticClass:\"el-icon-edit-outline btn-edit\",attrs:{\"disabled\":node.data.parent_id==null},on:{\"click\":function($event){$event.stopPropagation();_vm.editRole(node,data)}}}),_vm._v(\" \"),_c('button',{staticClass:\"el-icon-circle-close btn-del\",attrs:{\"disabled\":node.data.parent_id==null},on:{\"click\":function($event){$event.stopPropagation();_vm.delRole(node,data)}}})])])}}])})],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"role-tree-container\"},[_c('div',{staticClass:\"role-list\"},[_c('span',[_vm._v(\"权限列表\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"middle\",\"disabled\":_vm.parent_id==null?true:false},on:{\"click\":_vm.getCheckedNodes}},[_vm._v(\"保存授权\")])],1),_vm._v(\" \"),_c('el-tree',{ref:\"permissionTree\",attrs:{\"data\":_vm.permisionList,\"props\":_vm.defaultProps2,\"default-checked-keys\":_vm.defaultCheckKey,\"node-key\":\"pri_code\",\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"expand-on-click-node\":false},on:{\"node-click\":_vm.handlePerNodeClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_vm._v(\" \"),(_vm.role_name===\"超级管理员\")?_c('span',{staticClass:\"action-btn\"},[_c('button',{staticClass:\"el-icon-circle-plus btn-add\",on:{\"click\":function($event){$event.stopPropagation();_vm.addPri(node,data)}}}),_vm._v(\" \"),_c('button',{staticClass:\"el-icon-edit-outline btn-edit\",on:{\"click\":function($event){$event.stopPropagation();_vm.editPri(node,data)}}}),_vm._v(\" \"),_c('button',{staticClass:\"el-icon-circle-close btn-del\",on:{\"click\":function($event){$event.stopPropagation();_vm.delPri(node,data)}}})]):_vm._e()])}}])})],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[(_vm.role_name===\"超级管理员\")?_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"middle\"},on:{\"click\":function($event){_vm.openDialog(1)}}},[_vm._v(\"新增权限\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"权限信息\",\"visible\":_vm.dialogVisible,\"width\":\"50%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.dialogCancel}},[_c('el-form',{ref:\"permissionForm\",attrs:{\"model\":_vm.permissionForm,\"rules\":_vm.permissionFormRule,\"label-width\":\"120px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"权限类型:\",\"prop\":\"pri_type\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\",\"disabled\":_vm.isdisabled||_vm.isEdit},model:{value:(_vm.permissionForm.pri_type),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"pri_type\", $$v)},expression:\"permissionForm.pri_type\"}},[_c('el-option',{attrs:{\"label\":\"菜单\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"权限\",\"value\":2}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限名称:\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入权限名称\",\"clearable\":\"\"},model:{value:(_vm.permissionForm.name),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"name\", $$v)},expression:\"permissionForm.name\"}})],1),_vm._v(\" \"),(_vm.isRoot&&_vm.permissionForm.pri_type===1)?_c('el-form-item',{attrs:{\"label\":\"图标名称:\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图标名称\",\"clearable\":\"\"},model:{value:(_vm.permissionForm.icon),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"icon\", $$v)},expression:\"permissionForm.icon\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.permissionForm.pri_type===1)?_c('el-form-item',{attrs:{\"label\":\"是否弹窗:\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择是否弹窗显示\"},model:{value:(_vm.permissionForm.target),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"target\", $$v)},expression:\"permissionForm.target\"}},[_c('el-option',{attrs:{\"label\":\"是\",\"value\":\"_blank\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"否\",\"value\":null}})],1)],1):_vm._e(),_vm._v(\" \"),(_vm.isRoot)?_c('el-form-item',{attrs:{\"label\":\"路由:\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入路由\",\"clearable\":\"\"},model:{value:(_vm.permissionForm.url),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"url\", $$v)},expression:\"permissionForm.url\"}})],1):_c('el-form-item',{attrs:{\"label\":\"路由:\",\"prop\":\"url\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.permissionForm.url),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"url\", $$v)},expression:\"permissionForm.url\"}},[(_vm.hasUrl)?_c('template',{slot:\"prepend\"},[_vm._v(_vm._s(_vm.hasUrl))]):_vm._e()],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述:\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入描述\",\"clearable\":\"\"},model:{value:(_vm.permissionForm.remark),callback:function ($$v) {_vm.$set(_vm.permissionForm, \"remark\", $$v)},expression:\"permissionForm.remark\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.dialogCancel}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dialogSave}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7147fd0c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/permission/role.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7147fd0c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":192}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"G:\\\\\\\\云停\\\\\\\\src\\\\\\\\common\\\\\\\\styles\\\\\\\\index.scss\\\"}!@/styles/permission/role.scss\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7147fd0c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":192}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=1!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7147fd0c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7147fd0c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/permission/role.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}